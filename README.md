# 编译原理作业

C 编译器的前端，明天答辩，目测要挂科了

使用 C++17 标准，主要是想用结构化绑定

## version 0.1 2021/12/9

刚写完词法分析和语法分析

词法分析是虚假的自动机，不支持声明说明符，不支持预处理，不支持注释，不认 struct，不认 enum，不认 switch，不认中文  
我愿称之为 C--

语法分析是递归下降分析器，在词法分析 C--的基础上不支持数组，不支持指针，不支持 for 语句，函数至少要有一个实参  
我愿称之为 C----

真的要挂了

## version 0.2 2021/12/9

给语法分析上了异常

确定不支持 for 语句，且不支持 struct，不支持 enum

包哥巨佬已经写完语义分析了

救救

## version 0.3 2021/12/10

语义分析写了一半

目前支持 while 语句，do while 语句两个迭代语句，支持 if-else 选择语句，支持 break，continue 跳转语句

主要是用栈实现的回填，碧蓝知道了要气死

部分支持表达式语句，不支持的有按位运算表达式，移位运算表达式，移位赋值表达式，函数调用表达式，索引表达式，sizeof 表达式，成员表达式，间接表达式，逻辑表达式

部分支持复合语句，指刚做完标识符表

写的非常屎，因为一开始欢快地复制粘贴，然后发现抽不出函数了

包哥巨佬已经写完了

我想早睡一天

救救

## version 0.4 2021/12/11

你可曾见过真正的屎山？

我确信，这已经是一坨彻彻底底的屎了

不支持按位运算、移位运算、移位赋值运算、成员运算、间接运算、sizeof 运算

不支持数组和指针，因此不支持索引运算、取址运算和解引用运算

支持其他所有运算和对应的表达式，支持函数调用表达式

支持空语句，支持表达式语句

支持 while 语句，do while 语句两个迭代语句

支持 if-else 选择语句

支持 break，continue，goto，return 跳转语句

支持标签语句

支持复合语句

支持函数原型和函数定义

全是用栈实现的回填，碧蓝知道了要气死

我已经写的想吐了

不可能再写了，就这样吧

已萎

## version 0.5 2021/12/14

更新 readme 详细解析

这是一个源语言与 C 稍有不同的编译器的前端

其大部分时候与 C 语言或其子集表现一致，不同的地方在于函数必须有至少一个参数，且 void 参数支持形式参数名和实参传入

总的来说是没有做纯 void 导致的

### 预处理

预处理有消除转移换行，但没有消除注释（这个做起来简单，但是懒），源代码文件也不支持中文输入（因为用到了部分字符类型判断的 C 库函数）

### 词法分析

词法分析是虚假的自动机，只有标识符、字面量使用有穷状态自动机识别，支持错误定位和提示

词法分析能识别的字面量包括数字字面量，字符字面量，字符串字面量

可以识别的整型字面量包括八进制整型、十六进制整型、十进制整型

可以识别的浮点型字面量包括以下几种形式

3.5 .5 3. 3.5e2 3.5E-2

可以识别的字符字面量和字符串字面量允许转义序列

关键字支持见代码，不支持 struct 和 enum，不支持数组和指针识别

词法分析阶段，支持所有的 C 运算符

### 语法分析

语法分析是递归下降分析器，支持错误定位和提示

语法分析阶段，支持所有的 C 运算符，支持 6 种类型的语句，但不支持 for 语句和 switch 语句

### 语义分析和中间代码

语义分析和中间代码生成是语法制导翻译过程，不支持位运算，索引运算、移位赋值运算、成员运算、间接运算、sizeof 运算，除此之外支持所有 C 运算符，支持函数调用

语义分析支持语法分析支持的 6 种语句，支持函数原型和函数定义，支持外部变量声明

每个复合语句提供一个新的命名空间和作用域

### 修复 bug

修复语法分析的 bug，实装条件运算符和逗号运算符
